[{"title":"","date":"2018-03-13T08:55:23.963Z","path":"2018/03/13/SQL语言之复杂查询与视图/","text":"SQL语言之复杂查询与视图标签： 数据库 基本内容 SQL语言之子查询运用 SQL语言之结果计算与聚集函数 SQl语言之分组查询与分组过滤 利用SQL语言实现关系代数操作 SQL语言之视图及其应用 为什么需要子查询 集合成员资格((NOT)IN-子查询)某一元素是否是某一个集合的成员 集合之间的比较(θ-Some/θ-All子查询)某一个集合是否包含在另一个集合 集合基数的测试((NOT)EXISTS子查询)测试集合是否为空测试集合是否存在重复元素 SQL语言之子查询运用 子查询：出现在where子句中的Select语句被称为子查询，子查询返回一个集合，可以通过与这个集合比较来确定另一个查询集合 三种类型的子查询：(NOT)IN-子查询；(NOT)EXISTS子查询；θ-Some/θ-All子查询 (NOT)IN子查询 基本语法： 表达式[not]in(子查询) 示例： 列出张三、王三同学所有信息 select * from Student where Sname in (“张三”,”王三”); 列出选修了001号课程的学生的学号和姓名 select S#,Sname from Student where S# in (Select S# from SC where C#=’001’); θ-Some/θ-All子查询 基本语法： 表达式 θsome (子查询) 表达式 θall (子查询) θ是运算比较符：&lt;,&gt;,&gt;=,&lt;=,=,&lt;&gt; 示例： 找出工资最低的教师姓名(非相关子查询) select Tname from Teacher where Salary &lt;= all(select Salary from Teacher) 找出张三同学成绩最低的课程号(相关子查询) select C# from SC,Student S where Sname = “张三” and S.S# = SC.S# and Score &lt;= all (select from SC wnere S#=S.S#); (NOT)EXISTS子查询 (着重使用not exists) 基本语法： 表达式(NOT)EXISTS 子查询 示例： 检索学过001号教师主讲的所有课程的所有同学的 姓名 =&gt;不存在有一门001号教师主讲的课程该同学没有 学过 select Sname from Student where not exists (select from Course where Course.T#=’001’ and not exists (select from SC where S#=Student.S# and C#=Course.C#); 聚集函数COUNT、SUM、AVG、MAX、MIN=&gt;聚集函数不允许用在where子句中：where子句是对每一组进行条件过滤，而不是对集合进行条件过滤=&gt;COUNT会统计null，SUM、AVG、MAX、MIN均会忽略null SQl语言之分组查询与分组过滤分组： SQL可以将检索到的元素按照某一条件进行分类，具有相同条件值得元组划到一个组或一个集合，同时处理多个组或集合的聚集运算 Group子句 分组过滤： 若要对集合（即分组）进行条件过滤，即满足条件的集合/分组留下，不满足条件的集合/分组剔除。 Having子句，需要有Group by子句支持，换句话，没有Group by子句，便没有Having子句 select 列名from 表名1[where 检索条件][Group by 分组条件 [Having 分组过滤条件]]； SQL语言之视图及其应用 对应概念模式的数据在SQL中被称为基本表(Table)，而对应外模式的数据称为视图(View)，视图不仅包含外模式，而且包含其E-C映象 基本表是实际存储于文件中的表，基本表中的数据是需要存储的 视图其数据并不存储，而是在运行中动态产生与维护的 对视图数据的更改最终放映在对基本表的更改上 视图需要“先定义，再使用” create view view_name [(列名[,列名]…)] as 子查询[with check option]drop view view_name SQL视图更新的可执行性 1、如果视图的select目标包含聚集函数，则不能更新2、如果视图select子句使用了unique或distinct，则不能更新3、如果视图中包括了group by 子句，则不能更新4、如果视图中包含经算术表达式计算出来的列，则不能更新5、如果视图是由单个表的列构成但没有包括主键，则不能更新","tags":[]},{"title":"闪回表","date":"2017-05-24T16:16:38.569Z","path":"2017/05/25/oracle闪回表/","text":"闪回表是将表恢复到过去的某个时间点的状态，为DBA提供了一种在线、快速、便捷地恢复对表进行的修改、删除、插入等错误的操作。 与闪回查询不同，闪回查询只是得到表在过去某个时间点上的快照，并不改变表的当前状态，而闪回表则是将表及附属对象一起恢复到以前的某个时间点。 利用闪回表技术恢复表中数据的过程，实际上是对表进行DML操作的过程。Oracle自动维护与表相关联的索引、触发器、约束等，不需要DBA参与。 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108SQL&gt; set time on;15:00:11 SQL&gt; create table test(15:01:18 2 ID number primary key,name char(20));表已创建。15:01:51 SQL&gt; insert into test values(1,'ZHANG');已创建 1 行。15:02:30 SQL&gt; commit;提交完成。15:02:36 SQL&gt; insert into test values(2,'ZHAO');已创建 1 行。15:03:02 SQL&gt; commit;提交完成。15:03:06 SQL&gt; insert into test values(3,'WANG');已创建 1 行。15:03:29 SQL&gt; commit;提交完成。15:04:00 SQL&gt; SELECT current_scn FROM v$database;SELECT current_scn FROM v$database =&gt;错误原因：需要dba权限 *第 1 行出现错误:ORA-00942: table or view does not exist15:05:02 SQL&gt; conn system/aaa; =&gt;切换用户system查询已连接。15:08:21 SQL&gt; SELECT current_scn FROM v$database;CURRENT_SCN----------- 753183 =&gt;最近commit的SCN15:08:31 SQL&gt; conn scott/oracle1994;已连接。15:09:10 SQL&gt; update test set name='LIU' where id=1;已更新 1 行。15:09:51 SQL&gt; commit;提交完成。15:10:01 SQL&gt; select * from test; ID NAME---------- -------------------- 1 LIU 2 ZHAO 3 WANG15:10:22 SQL&gt; delete from test where id=3;已删除 1 行。15:10:47 SQL&gt; commit;提交完成。15:10:56 SQL&gt; select * from test; ID NAME---------- -------------------- 1 LIU 2 ZHAO15:11:05 SQL&gt; alter table test ENABLE ROW MOVEMENT; =&gt;启动test表的ROW MOVEMENT特性 表已更改。15:12:20 SQL&gt; FLASHBACK TABLE test TO TIMESTAMP =&gt;将test表恢复到2017-5-23 15:13:00 2 TO_TIMESTAMP('2017-5-23 15:10:47', 15:10:47时刻的状态15:15:19 3 'YYYY-MM-DD HH24:MI:SS');闪回完成。15:16:00 SQL&gt; select * from test; ID NAME---------- -------------------- 1 LIU 2 ZHAO 3 WANG15:16:14 SQL&gt; FLASHBACK TABLE test TO SCN 753183; =&gt;将test表恢复到SCN为753183的状态时刻闪回完成。15:17:40 SQL&gt; select * from test; ID NAME---------- -------------------- 1 ZHANG 2 ZHAO 3 WANG 闪回删除可恢复使用DROP TABLE语句删除的表，是一种对意外删除的表的恢复机制。 闪回删除功能的实现主要是通过Oracle 10g数据库中的“回收站”（Recycle Bin）技术实现的。 在Oracle 10g数据库中，当执行DROP TABLE操作时，并不立即回收表及其关联对象的空间，而是将它们重命名后放入一个称为“回收站”的逻辑容器中保存，直到用户决定永久删除它们或存储该表的表空间存储空间不足时，表才真正被删除。 为了使用闪回删除技术，必须开启数据库的“回收站”。 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515215:20:42 SQL&gt; conn system/aaa;已连接。15:21:06 SQL&gt; SHOW PARAMETER RECYCLEBIN; =&gt;查看是否启用回收站NAME TYPE VALUE------------------------------------ ----------- ------------------------------recyclebin string on15:21:13 SQL&gt; conn scott/oracle1994;已连接。15:21:41 SQL&gt; drop table test;表已删除。15:23:51 SQL&gt; conn scott/oracle1994;已连接。15:24:33 SQL&gt; select OBJECT_NAME,ORIGINAL_NAME,TYPE =&gt;通过USER_RECYCLEBIN15:25:12 2 FROM USER_RECYCLEBIN; 查看回收站信息OBJECT_NAME ORIGINAL_NAME------------------------------ --------------------------------TYPE-------------------------BIN$U7+8NB2MT7evMqzuXc91UQ==$0 SYS_C006599INDEXBIN$+pzajLDST0qgKVLj7zzhhw==$0 TESTTABLE15:25:18 SQL&gt; conn system/aaa;已连接。15:28:13 SQL&gt; select OBJECT_NAME,ORIGINAL_NAME,TYPE =&gt;通过DBA_RECYCLEBIN15:28:21 2 FROM DBA_RECYCLEBIN; 查看回收站信息OBJECT_NAME ORIGINAL_NAME------------------------------ --------------------------------TYPE-------------------------BIN$U7+8NB2MT7evMqzuXc91UQ==$0 SYS_C006599INDEXBIN$+pzajLDST0qgKVLj7zzhhw==$0 TESTTABLE15:28:37 SQL&gt; conn scott/oracle1994;已连接。15:32:08 SQL&gt; select * from \"BIN$+pzajLDST0qgKVLj7zzhhw==$0\"; =&gt;通过表在回收站中的新名 ID NAME 字查询表中的数据---------- -------------------- 1 ZHANG 2 ZHAO 3 WANG 比较drop table test和PURGE TABLE TEST的区别12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626315:46:06 SQL&gt; CREATE TABLE test(15:47:06 2 ID NUMBER PRIMARY KEY , 15:47:10 3 name CHAR(20)15:47:10 4 );15:47:26 SQL&gt; drop table test; =&gt;drop table test;只是把表放入回收站表已删除。15:47:38 SQL&gt; 15:47:46 SQL&gt; CREATE TABLE test(15:47:46 2 ID NUMBER PRIMARY KEY , 15:47:46 3 name CHAR(20)15:47:46 4 );表已创建。15:47:47 SQL&gt; desc test; 名称 是否为空? 类型 ----------------------------------------- -------- ---------------------------- ID NOT NULL NUMBER NAME CHAR(20)15:47:59 SQL&gt; select OBJECT_NAME,ORIGINAL_NAME,TYPE15:48:06 2 FROM USER_RECYCLEBIN;OBJECT_NAME ORIGINAL_NAME------------------------------ --------------------------------TYPE-------------------------BIN$kBXFR6YkSzWoNTCL63aBgA==$0 SYS_C006601INDEXBIN$I+a6VzA3RmeeNlyWMUWhXA==$0 TESTTABLE15:48:06 SQL&gt; PURGE TABLE TEST; =&gt;PURGE TABLE TEST;删除回收站的表， 不会删除数据库存在的同名表表已清除。15:48:19 SQL&gt; desc tesd;ERROR:ORA-04043: 对象 tesd 不存在15:48:25 SQL&gt; desc test; 名称 是否为空? 类型 ----------------------------------------- -------- ---------------------------- ID NOT NULL NUMBER NAME CHAR(20)15:49:39 SQL&gt; DROP TABLE test PURGE; =&gt;PURGE 和 DROP的联合使用表已删除。15:50:04 SQL&gt; desc test;ERROR:ORA-04043: 对象 test 不存在15:50:13 SQL&gt; select OBJECT_NAME,ORIGINAL_NAME,TYPE15:50:29 2 FROM USER_RECYCLEBIN;未选定行 1234567891011121314151617181920212223242526272815:50:30 SQL&gt; CREATE TABLE example(15:55:52 2 ID NUMBER PRIMARY KEY,15:55:52 3 NAME CHAR(20));表已创建。15:55:55 SQL&gt; INSERT INTO example VALUES(1,'BEFORE DROP');已创建 1 行。15:56:07 SQL&gt; commit;提交完成。15:56:15 SQL&gt; drop table example;表已删除。15:56:35 SQL&gt; FLASHBACK TABLE example TO BEFORE DROP 15:56:46 2 RENAME TO new_example; =&gt;新表命名为new_exampl闪回完成。15:57:27 SQL&gt; select * from new_example; =&gt;类似select*from\"BIN$+pzajLDST0qgKVLj7zzhhw==$0\"; ID NAME---------- -------------------- 1 BEFORE DROP","tags":[]},{"title":"百度云文件高速下载技巧","date":"2017-05-24T07:14:29.261Z","path":"2017/05/24/Greasy/","text":"Greasemonkey + 百度网盘直接下载助手 + idm 准备工作1、进入网址https://greasyfork.org/zh-CN/安装一个对应浏览器的用户脚本管理器 2、在搜索栏上搜索百度网盘直接下载助手 3、下载Internet Download Manager(IDM)或者迅雷下载，绕过百度云客户端下载 测试1、在百度云盘网页端选择下载的文件，点击分享 2、复制url，在浏览器中打开 3、在IDM中下载(断点下载，速度比较快)","tags":[]},{"title":"hexo+githubpage命令","date":"2017-05-18T16:10:11.449Z","path":"2017/05/19/hexo+githubpage命令/","text":"步骤 生成和部署 C:\\Users\\Administrator&gt;F: F:\\&gt;cd hexo F:\\hexo&gt;hexo g INFO Start processing INFO Files loaded in 399 ms INFO Generated: atom.xml INFO Generated: content.json INFO 12 files generated in 346 ms F:\\hexo&gt;hexo s INFO Start processing INFO Hexo is running at http://localhost:4000/. Press Ctrl+C to stop. 命令行提交至GitHub 直接运行deploy.sh文件 hexo generatecp -r ../public/* ../blog/.deploy/fatsolee.github.iocd .deploy/fatsolee.github.iogit add .git commit -m “update”git push origin master","tags":[]},{"title":"七牛配合Markdown简易使用教程","date":"2017-05-18T15:02:33.880Z","path":"2017/05/18/Markdown使用七牛图床/","text":"登陆https://www.qiniu.com/，注册账号 在本地创建共享文件名qiniu data，移动照片到qiniu data上 下载图形化工具qrsbox 运行qrsbox.exe 1、个人面板-&gt;密匙管理，查看自己AccessKey和SecretKey2、同步源目录填写本地创建好的共享文件名，格式：e:/qiniu data3、空间名，会影响外链（url），例如我填写tutorial/图片url：http://外链默认域名/tutorial/图片名称 登陆https://www.qiniu.com/，个人面板-&gt;个人中心-&gt;产品列表-&gt;内容管理，点击操作-&gt;复制外链 Markdown使用：![](图片外链)","tags":[]},{"title":"软件工程上课笔记","date":"2017-04-27T13:05:45.088Z","path":"2017/04/27/软件工程/","text":"软件工程过程一、软件工程以质量焦点为基础，分为方法，工具，过程三个研究方向。方法支撑过程和工具，过程和工具又促进方法学的研究。 软件工程过程 方法 工具 二、软件工程过程包括四种基本活动 软件规格说明 软件开发 软件确认 软件演进 三、一个良好的软件工程过程具备一下特点 易理解性 可见性 可接受性 可支持性 可靠性 软件开发模型 瀑布模型 快速原型模型 快速应用开发模型特点：(1)借助构件(2)并行开发 增量模型 螺旋模型特点：(1)风险分析(2)迭代每次迭代过程包括三个过程：i：确定目标ii：选择方案iii：设定约束条件 喷泉模型 软件重用的三个层次(1)知识重用(2)方法重用 代码重用 设计成果重用 分析结果重用 系统工程定义：关注目标系统各种相关要素的分析，设计，并将其组成有机的系统计算机系统主要组成成分：软件，硬件，人员，数据库，文档，过程； 问题 基于计算机的系统的基本组成包括什么？答：软件，硬件，人员，数据库，文档，过程 可行性研究主要关注哪些方面？答：(1)风险分析(2)资源分析(3)技术分析 经济效益的度量包括哪三个方面，如何计算？答：(1)投入/产出比(2)投资回收期(3)纯收入","tags":[]},{"title":"Oracle学习笔记","date":"2017-04-27T13:03:11.406Z","path":"2017/04/27/Oracle学习笔记/","text":"一般使用Oracle，，只需要启动这两个服务：OracleServiceORCL和OracleOraDb11g_home1TNSListener 简易方法：将以下代码保存成”.bat“文件或”.cmd“文件,直接打开服务@echo offnet start oracleserviceorclnet start oracleoradb11g_home1tnslistenerpause 如果需要使用Database Control -orcl(浏览器登录)，则需要开启OracleDBConsoleORCL服务,通过访问https://localhost:1158/em SQL Plus登陆两种方法： 用户名：system口令：oracle1994 用户名：sys口令：oracle1994 as sysdba","tags":[]},{"title":"Git使用","date":"2017-04-27T12:58:15.539Z","path":"2017/04/27/Git使用/","text":"一、本地库同步到远程库步骤： git init git remote add origin git@github.com:michaelliao/learngit.git&lt;!上面的michaelliao替换成你自己的GitHub账户名&gt; git push -u origin master&lt;!第一次推送master分支的所有内容&gt; git push origin master&lt;!此后，每次本地提交后，只要有必要，就可以使用命令git push origin master推送最新修改&gt; 修改Git remote add时使用的远程仓库git remote rm origin git remote add origin git@github.com:Liutos/foobar.git","tags":[]},{"title":"Android实现侧滑","date":"2017-04-27T12:39:06.519Z","path":"2017/04/27/Android实现侧滑/","text":"一般的侧滑的实现 ViewGroup Menu + Content onTouchEvent MOVE:ViewGroup的leftMargin UP:根据显示菜单的宽度，决定将其隐藏或者显示 (1)、 Scroller (2)、 LeftMargin + Thread 自定义ViewGroup1、onMeasure决定内部View(子View)的宽和高，以及呢，自己的宽和高2、onLayout决定子View的放置的位置3、onTouchEvent 自定义属性允许用户设置菜单离屏幕右边的边距1、书写xml文件，values/attr.xml2、在布局文件中进行使用，特别注意xmlns在Android Studio 中直接xmlns:hyman=”http://schemas.android.com/apk/res-auto“3、在构造方法中（3个参数的构造方法）中获得我们设置的值 抽屉式侧滑区别：菜单仿佛在内容区域底下mMenuWidth100px mMenuWidth - 100200px mMenuWidth - 200 属性动画：TraslationX调用动画时机ACTION_MOVE QQ5.0侧滑效果区别1、内容区域1.0-0.7缩放效果区别2、菜单的偏移量需要修改区别3、菜单的显示有缩放，以及透明度变化","tags":[]},{"title":"GitHub 网站的维护","date":"2017-03-20T15:57:15.134Z","path":"2017/03/20/GitHub上搭建博客/","text":"利用本地编辑器编写博客后维护网站其他页面 使用Jekyll-Bootstrap在本地测试网站功能 使用Git客户端工具上传模板和页面文件 Git Server会用jekyll转化你的模板，并生成静态页面","tags":[]}]